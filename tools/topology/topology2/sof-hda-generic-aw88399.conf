<searchdir:include>
<searchdir:include/common>
<searchdir:include/components>
<searchdir:include/dais>
<searchdir:include/pipelines>
<searchdir:include/pipelines/cavs>
<searchdir:platform>
<searchdir:platform/intel>

<vendor-token.conf>
<tokens.conf>
<virtual.conf>
<host-gateway-playback.conf>
<host-gateway-capture.conf>
<host-copier-gain-mixin-playback.conf>
<host-copier-gain-src-mixin-playback.conf>
<mixout-dai-copier-playback.conf>
<mixout-gain-dai-copier-playback.conf>
<mixout-aria-gain-mixin-playback.conf>
<mixout-gain-efx-dai-copier-playback.conf>
<mixout-gain-efx-mbdrc-dai-copier-playback.conf>
<mixout-gain-smart-amp-dai-copier-playback.conf>
<mixout-gain-host-copier-capture.conf>
<dai-copier-eqiir-module-copier-capture.conf>
<dai-copier-gain-eqiir-module-copier-capture.conf>
<gain-capture.conf>
<deepbuffer-playback.conf>
<io-gateway.conf>
<io-gateway-capture.conf>
<highpass-capture-be.conf>
<data.conf>
<pcm.conf>
<pcm_caps.conf>
<fe_dai.conf>
<hda.conf>
<ssp.conf>
<dmic.conf>
<pdm_config.conf>
<hw_config_simple.conf>
<platform/intel/ssp_aux_config.conf>
<manifest.conf>
<route.conf>
<common_definitions.conf>
<input_pin_binding.conf>
<output_pin_binding.conf>
<dmic-default.conf>
<hdmi-default.conf>
<deep-buffer-default.conf>
<module-copier.conf>

Define {
	HDA_CONFIG  "none"
	PLATFORM "none"
	NUM_DMICS 0
# doesn't it need to define DMIC0_HOST_PIPELINE_SINK and DMIC0_DAI_PIPELINE_SRC?
	DMIC0_HOST_PIPELINE_SINK 'host-copier.6.capture'
	DMIC0_DAI_PIPELINE_SRC 'module-copier.12.2'
	DMIC0_DAI_COPIER 'dai-copier.DMIC.dmic01.capture'
	DMIC0_DAI_EQIIR "highpass_40hz_20db"
	DMIC0_PCM_CAPS 'Gain Capture 11'
	AW_SMART_PIPELINE_ID	20
	# SSP parameters - defaults can be overridden by cmake build parameters
	# SSP1 is the most common for smart amps, but variants are built for all ports
	AW_SMART_STREAM_NAME	'SSP1-Codec'
	AW_SMART_SSP_INDEX	1
	SSP_BLOB_VERSION	$SSP_BLOB_VERSION_1_5
}

# override defaults with platform-specific config
IncludeByKey.PLATFORM {
	"mtl"	"platform/intel/mtl.conf"
	"lnl"	"platform/intel/lnl.conf"
	"ptl"	"platform/intel/ptl.conf"
}

# include HDA config if needed.
IncludeByKey.HDA_CONFIG {
	"mix"		"cavs-mixin-mixout-hda.conf"
	"efx"		"cavs-mixin-mixout-efx-hda.conf"
	"src"		"cavs-src-mixin-mixout-hda.conf"
	"passthrough"	"cavs-passthrough-hda.conf"
}

# include DMIC config if needed.
IncludeByKey.NUM_DMICS {
	"[1-4]"	"platform/intel/dmic-generic.conf"
}

Define {
	NUM_HDMIS 	3
	HDMI1_ID	1
	HDMI2_ID	2
	HDMI3_ID	3
	HDMI1_PCM_ID	3
	HDMI2_PCM_ID	4
	HDMI3_PCM_ID	5
	DMIC0_PCM_ID	6
}

IncludeByKey.NUM_HDMIS {
"[3-4]" "platform/intel/hdmi-generic.conf"
}

Object.Widget.virtual [
	{
		name 'codec0_in'
		type input
		index 1
	}
	{
		name 'codec1_in'
		type input
		index 2
	}
	{
		name 'codec0_out'
		type output
		index 3
	}
	{
		name 'codec1_out'
		type output
		index 4
	}
	{
		name 'codec2_in'
		type input
		index 5
	}
	{
		name 'codec2_out'
		type output
		index 6
	}
	{
		name 'iDisp1_out'
		type output
		index 7
	}
	{
		name 'iDisp2_out'
		type output
		index 8
	}
	{
		name 'iDisp3_out'
		type output
		index 9
	}
	{
		name 'iDisp3 Tx'
		type out_drv
		index 0
	}
	{
		name 'iDisp2 Tx'
		type out_drv
		index 1
	}
	{
		name 'iDisp1 Tx'
		type out_drv
		index 2
	}
	{
		name 'Analog CPU Playback'
		type out_drv
		index 3
	}
	{
		name 'Digital CPU Playback'
		type out_drv
		index 4
	}
	{
		name 'Alt Analog CPU Playback'
		type out_drv
		index 5
	}
	{
		name 'Analog CPU Capture'
		type input
		index 6
	}
	{
		name 'Digital CPU Capture'
		type input
		index 7
	}
	{
		name 'Alt Analog CPU Capture'
		type input
		index 8
	}
]

Object.Pipeline.mixout-gain-smart-amp-dai-copier-playback [
	{
		index $AW_SMART_PIPELINE_ID

		Object.Widget.dai-copier.1 {
			dai_index	$AW_SMART_SSP_INDEX
			dai_type	"SSP"
			copier_type	"SSP"
			stream_name	$AW_SMART_STREAM_NAME
			node_type	$I2S_LINK_OUTPUT_CLASS
			num_input_audio_formats 1
			num_output_audio_formats 1
			Object.Base.input_audio_format [
				{
					in_rate			48000
					in_bit_depth		32
					in_valid_bit_depth	32
				}
			]
			Object.Base.output_audio_format [
				{
					out_rate		48000
					out_bit_depth		32
					out_valid_bit_depth	32
				}
			]
		}

		Object.Widget.gain.1 {
			Object.Control.mixer.1 {
				name 'Post Mixer AW88399 Playback Volume'
			}
		}

		Object.Widget.smart_amp.1 {
			Object.Control.bytes."1" {
				name 'HDA AW88399 smart_amp_init'
			}
		}
	}
]

Object.Pipeline.dai-copier-gain-eqiir-module-copier-capture [
	{
		index 21

		Object.Widget.dai-copier.1 {
			dai_index	$AW_SMART_SSP_INDEX
			dai_type	"SSP"
			copier_type	"SSP"
			stream_name	$AW_SMART_STREAM_NAME
			node_type	$I2S_LINK_INPUT_CLASS
			Object.Base.output_pin_binding.1 {
				output_pin_binding_name "smart_amp.20.1"
			}
		}

		Object.Widget.module-copier."2" {
			stream_name	$AW_SMART_STREAM_NAME
		}

		Object.Widget.gain.1 {
			Object.Control.mixer.1 {
				name 'AW88399 Capture Volume'
			}
		}

		Object.Widget.eqiir.1 {
			Object.Control.bytes."1" {
				name 'AW88399 Capture Eq'
			}
		}
	}
]

Object.Base.route [
	{
		source 'mixin.1.1'
		sink 'mixout.20.1'
	}
	{
		source 'smart_amp.20.1'
		sink 'dai-copier.SSP.SSP1-Codec.playback'
	}
	{
		source 'dai-copier.SSP.SSP1-Codec.capture'
		sink 'smart_amp.20.1'
	}
]

Object.Dai.SSP [
	{
		name		$AW_SMART_STREAM_NAME
		dai_index	$AW_SMART_SSP_INDEX
		id		0
		direction	"duplex"
		default_hw_conf_id 0
		sample_bits	32
		io_clk		24576000

		Object.Base.hw_config.1 {
			name	"SSP$AW_SMART_SSP_INDEX"
			id	0
			fsync_freq	48000
			bclk_freq	3072000
			tdm_slots	2
			tdm_slot_width	32
			Object.Base.link_config.1 {
				clock_source 1
			}
		}
	}
]
