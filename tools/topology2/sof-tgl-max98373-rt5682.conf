#
# SOF TGL MAX98373-RT5682 I2S
#
#
# PCM 0 -> buffer1.0 -> smart_amp1.0 -> buffer1.1 -> SSP1.playback
#				^
#				|
#			    buffer1.2
#				^
#				|
# PCM 0 <- buffer11.0 <- muxdemux11.0 <- buffer11.1 <- SSP1.capture
# PCM 1 <-> buffer2.0/3.0 <-> volume2.0/3.0 <-> buffer2.1/3.1 <-> SSP0.duplex
# PCM 2 -> buffer5.0 -> volume5.0 -> buffer5.1 -> HDA4.playback
# PCM 3 -> buffer6.0 -> volume6.0 -> buffer6.1 -> HDA5.playback
# PCM 4 -> buffer7.0 -> volume7.0 -> buffer7.1 -> HDA6.playback
# PCM 5 -> buffer8.0 -> volume8.0 -> buffer8.1 -> HDA7.playback
# PCM 99 <- buffer4.0 <- volume4.0 <- buffer4.1 <- DMIC0
# PCM 100 <- buffer.9.0 <- kpb.9.0 <- buffer.9.1 <- volume.9.0 <- buffer.9.2 <- DMIC1
#				|
#				V
# 			   buffer.10.1 -> selector.10.0 -> buffer.10.0 -> detect.10

<include/common/tokens.conf>
<include/platform/intel/bxt.conf>
<include/pipelines/pipeline-volume-playback.conf>
<include/pipelines/pipeline-volume-capture.conf>
<include/pipelines/pipeline-passthrough-capture.conf>
<include/pipelines/pipeline-kpb-vol-capture.conf>
<include/pipelines/pipeline-smart-amp-playback.conf>
<include/pipelines/pipeline-smart-amp-ref-capture.conf>
<include/pipelines/pipeline-detect.conf>
<include/common/connection.conf>
<include/common/endpoint.conf>
<include/components/dai.conf>
<include/components/detect.conf>
<include/components/detect_data.conf>
<include/components/smart_amp.conf>
<include/components/smart_amp_data.conf>
<include/dais/hda.conf>
<include/dais/ssp.conf>
<include/dais/dmic.conf>
<include/common/manifest.conf>

#
# Pipeline definitions
#

# Pipeline ID:1 PCM ID: 0
Object.pipeline-smart-amp-playback."1.0" {
	pcm_name		"smart373-spk"
	format			"s32le"
	channels		2
	rate			48000
	smart_amp_class	"smart_amp"
	smart_amp_config	"dummy_amp_config"
	smart_amp_model	"dummy_amp_model"
	smart_amp_model_get	"dummy_amp_model_get"
}

# Pipeline ID:11 PCM ID: 0
Object.pipeline-smart-amp-ref-capture."11.0" {
	pcm_name	"smart373-spk"
	format		"s32le"
	channels	2
	rate		48000
}

# Pipeline ID:2 PCM ID: 1
Object.pipeline-volume-playback."2.1" {
	pcm_name		"Headset"
	format			"s32le"
	channels		2
	rate			48000
	volume_ctl_name	"2 Master Playback Volume"
}

# Pipeline ID:3 PCM ID: 1
Object.pipeline-volume-capture."3.1" {
	pcm_name		"Headset"
	format			"s32le"
	channels		2
	rate			48000
	volume_ctl_name	"3 Master Capture Volume"
}

# Pipeline ID:5 PCM ID: 2
Object.pipeline-volume-playback."5.2" {
	pcm_name		"HDMI1"
	format			"s32le"
	channels		2
	rate			48000
	volume_ctl_name	"5 Master Playback Volume"
}

# Pipeline ID:6 PCM ID: 3
Object.pipeline-volume-playback."6.3" {
	pcm_name		"HDMI2"
	format			"s32le"
	channels		2
	rate			48000
	volume_ctl_name	"6 Master Playback Volume"
}

# Pipeline ID:7 PCM ID: 4
Object.pipeline-volume-playback."7.4" {
	pcm_name		"HDMI3"
	format			"s32le"
	channels		2
	rate			48000
	volume_ctl_name	"7 Master Playback Volume"
}

# Pipeline ID:8 PCM ID: 5
Object.pipeline-volume-playback."8.5" {
	pcm_name		"HDMI4"
	format			"s32le"
	channels		2
	rate			48000
	volume_ctl_name	"8 Master Playback Volume"
}

# Pipeline ID:4 PCM ID: 99
Object.pipeline-passthrough-capture."4.99" {
	pcm_name	"DMIC"
	format		"s32le"
	channels	4
	rate		48000
}

# Pipeline ID:9 PCM ID: 100
Object.pipeline-kpb-vol-capture."9.100" {
	pcm_name		"DMIC16k"
	format			"s32le"
	channels		2
	rate			16000
	period			20000
	volume_ctl_name	"9 KWD Capture Volume"
}

# Pipeline ID:10
Object.pipeline-detect."10" {
	format			"s24le"
	channels		2
	rate			16000
	period			20000
	stream_name		"DMIC16k.capture.100"
	detect_sink_name	"Detect Sink 10"
	detect_object_class	"detect"
	detect_config		"dummy_detect_config"
	detect_model		"dummy_detect_model"
}

#
# List of all DAIs
#
#SSP Index: 0, Direction: duplex
Object.SSP."0.0.duplex" {
	dai_name		"SSP0-Codec"
	id 			0
	default_hw_config	0
	format			"s24le"
	sample_bits		24
	hw_config."0" {
		mclk_freq	19200000
		bclk_freq	2400000
		tdm_slots	2
		tdm_slot_width	25
		tx_slots	3
		rx_slots	3
	}

	#include DAI components
	<include/dais/pipe-dai-playback.conf>
	<include/dais/pipe-dai-capture.conf>
}

#SSP Index: 1, Direction: duplex
Object.SSP."1.1.duplex" {
	dai_name		"SSP1-Codec"
	id 			7
	default_hw_config	7
	format			"s32le"
	sample_bits		32
	hw_config."7" {
		format		"DSP_B"
		mclk_freq	19200000
		bclk_freq	12288000
		tdm_slot_width	32
		tdm_slots	8
		tx_slots	15
		rx_slots	255
	}

	#include DAI components
	<include/dais/pipe-dai-playback.conf>
	<include/dais/pipe-dai-capture.conf>
}

# HDA Playback DAI Index: 4,  Direction: playback
# Capture DAI index is unused
Object.HDA."4.0.playback" {
	dai_name		"iDisp1"
	id 			3
	format			"s32le"
	default_hw_config	3
	hw_config."3" {}

	#include DAI components
	<include/dais/pipe-dai-playback.conf>
}

# HDA Playback DAI Index: 5,  Direction: playback
# Capture DAI index is unused
Object.HDA."5.0.playback" {
	dai_name		"iDisp2"
	id 			4
	format			"s32le"
	default_hw_config	4
	hw_config."4" {}

	#include DAI components
	<include/dais/pipe-dai-playback.conf>
}

# HDA Playback DAI Index: 6,  Direction: playback
# Capture DAI index is unused
Object.HDA."6.0.playback" {
	dai_name		"iDisp3"
	id 			5
	format			"s32le"
	default_hw_config	5
	hw_config."5" {}

	#include DAI components
	<include/dais/pipe-dai-playback.conf>
}

# HDA Playback DAI Index: 6,  Direction: playback
# Capture DAI index is unused
Object.HDA."7.0.playback" {
	dai_name		"iDisp4"
	id 			6
	format			"s32le"
	default_hw_config	6
	hw_config."6" {}

	#include DAI components
	<include/dais/pipe-dai-playback.conf>
}

# DMIC DAI Index: 0,  Direction: capture
Object.DMIC."0.0.capture" {
	dai_name		"dmic01"
	id 			1
	format			"s32le"
	default_hw_config	1
	hw_config."1" {}
	driver_version		1
	clk_min		500000
	clk_max		4800000
	duty_min		40
	duty_max		60
	sample_rate		48000
	fifo_word_length	32
	unmute_ramp_time_ms	200
	num_pdm_active		2

	# PDM controller config
	pdm_config."0" {}
	pdm_config."1" {}

	#include DAI components
	<include/dais/pipe-dai-capture.conf>
}

# DMIC DAI Index: 1,  Direction: capture
Object.DMIC."1.1.capture" {
	dai_name		"dmic16k"
	id 			2
	format			"s32le"
	default_hw_config	2
	hw_config."2" {}
	driver_version		1
	clk_min		500000
	clk_max		4800000
	duty_min		40
	duty_max		60
	sample_rate		16000
	fifo_word_length	32
	unmute_ramp_time_ms	400
	num_pdm_active		1

	# PDM controller config
	pdm_config."0" {}

	capture_sink_count	3

	#include DAI components
	<include/dais/pipe-dai-capture.conf>
}

#
# List of all endpoint connections
#
# Connect: Pipeline 1 -> SSP 1 DAI_IN
Object.connection."endpoint.1.0" {
	source "endpoint.sink.pipeline.1.0"
	sink "endpoint.source.SSP.1.0"
}

# Connect: SSP 1 DAI_OUT -> Pipeline 11
Object.connection."endpoint.2.0" {
	sink "endpoint.source.pipeline.11.0"
	source "endpoint.sink.SSP.1.0"
}

# Connect muxdemux11.0 -> buffer1.2
Object.connection."endpoint.3.0" {
	sink "endpoint.source.pipeline.1.0"
	source "endpoint.sink.pipeline.11.0"
}

# Connect: Pipeline 2 -> SSP 0 DAI_IN
Object.connection."endpoint.4.0" {
	source "endpoint.sink.pipeline.2.0"
	sink "endpoint.source.SSP.0.0"
}

# Connect: SSP 0 DAI_OUT -> Pipeline 3
Object.connection."endpoint.5.0" {
	sink "endpoint.source.pipeline.3.0"
	source "endpoint.sink.SSP.0.0"
}

# Connect: Pipeline 5 -> HDA 4 DAI_IN
Object.connection."endpoint.6.0" {
	source "endpoint.sink.pipeline.5.0"
	sink "endpoint.source.HDA.4.0"
}

# Connect: Pipeline 6 -> HDA 5 DAI_IN
Object.connection."endpoint.7.0" {
	source "endpoint.sink.pipeline.6.0"
	sink "endpoint.source.HDA.5.0"
}

# Connect: Pipeline 7 -> HDA 6 DAI_IN
Object.connection."endpoint.8.0" {
	source "endpoint.sink.pipeline.7.0"
	sink "endpoint.source.HDA.6.0"
}

# Connect: Pipeline 8 -> HDA 7 DAI_IN
Object.connection."endpoint.9.0" {
	source "endpoint.sink.pipeline.8.0"
	sink "endpoint.source.HDA.7.0"
}

# Connect: DMIC 0 DAI_OUT -> Pipeline 4
Object.connection."endpoint.10.0" {
	sink "endpoint.source.pipeline.4.0"
	source "endpoint.sink.DMIC.0.0"
}

# Connect: DMIC 1 DAI_OUT -> Pipeline 9
Object.connection."endpoint.11.0" {
	sink "endpoint.source.pipeline.9.0"
	source "endpoint.sink.DMIC.1.0"
}

# Connect: kpb9.0 -> buffer10.0
Object.connection."endpoint.12.0" {
	sink "endpoint.source.pipeline.10.0"
	source "endpoint.sink.pipeline.9.0"
}

# Connect: detect_sink.10 -> Pipeline 9 host
Object.connection."endpoint.13.0" {
	sink "endpoint.source.pipeline.9.1"
	source "endpoint.sink.pipeline.10.0"
}
